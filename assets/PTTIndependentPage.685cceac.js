import{al as L,aF as R,u as $,r as v,d as i,k as T,j as a,f as e,g as _,t as d,h as E,w as t,F as q,an as z,l as I,e as h,p as y,i as w,Q as P,aD as O,aE as j,q as G}from"./index.db764cee.js";import{Q as B,b as g}from"./QDialog.f096fac1.js";import{a as p,Q as S}from"./use-prevent-scroll.7f7d7311.js";import{Q as D}from"./QScrollArea.0fe1c3a5.js";import{Q as H}from"./QEditor.98fa111a.js";import{u as M}from"./use-quasar.008ba00b.js";import{_ as J}from"./SearchBar.9cf33775.js";import"./format.5c5cc304.js";import"./use-dark.7d48d3c9.js";import"./portal.85d26471.js";import"./QForm.f5990077.js";import"./QScrollObserver.88dd0327.js";import"./use-fullscreen.97de2154.js";const N=f=>(O("data-v-361b3489"),f=f(),j(),f),K=N(()=>a("div",{class:"topic-bg"},null,-1)),W={class:"absolute-top contentContainer"},X={class:"PTTContainerLeft absolute-center q-mt-md"},Y={class:"absolute-top-left q-ma-xl"},Z=N(()=>a("div",{class:"text-h5 text-weight-medium",style:{"font-size":"30px"}},"Discovery",-1)),ee={class:"q-mt-xs text-caption"},te={class:"listHeaderGroup"},ae={class:"questionDisplay"},se={class:"questionDisplayTop"},le={class:"text-h4 text-center"},oe={class:"text-subtitle1 q-pa-md"},re={style:{"white-space":"break-spaces"}},ie=["src"],de=["src"],ne={class:"text-right q-mr-lg"},ue=["src"],ce={class:"q-ml-xs text-h6",style:{display:"inline-block",position:"relative",top:"6px",left:"6px"}},me=["src"],ve={class:"editorDialogContainer"},pe={class:"q-pa-md q-gutter-sm"},_e={class:"text-center q-mt-xs"},he={__name:"PTTIndependentPage",setup(f){const Q=R(),b=M(),V=$(),n=v([]),l=v({head:"\u9EDE\u9078\u65C1\u908A\u7684\u6B04\u4F4D",userAvatar:"https://source.boringavatars.com/beam/250/65sdfsdf65asg64w4t?colors=264653,2a9d8f,e9c46a,f4a261,e76f51",messageBoard:[]}),C=v(),u=v(""),c=v(!1),k=v(!1),A=()=>{u.value="",c.value=!1},U=async()=>{try{await G.post(`PTTs/${C.value}`,{message:u.value}),l.value.messageBoard.push({avatar:V.avatar,message:u.value,userName:V.userName}),u.value="",c.value=!1,x(),b.notify({message:"success",caption:"\u65B0\u589E\u7559\u8A00\u6210\u529F",color:"secondary"})}catch{u.value="",c.value=!1,b.notify({message:"error",caption:"\u8ACB\u767B\u5165\u5E33\u865F",color:"red"})}},F=o=>{l.value=n.value[o],C.value=n.value[o]._id},x=async o=>{try{const{data:s}=await z.get("/PTTs/all",{params:{theme:Q.params.theme,search:o}});n.value=s.result,l.value=n.value[0]}catch(s){console.log(s),b.notify({message:"error",caption:"\u8B80\u53D6\u5931\u6557",color:"red"})}};return x(),(o,s)=>(i(),T(q,null,[K,a("div",W,[e(_,{class:"q-mb-md q-mr-md fixed-bottom-right",color:"teal-2",icon:"fa-solid fa-angles-left",label:"back",to:"/PTTPage"}),a("div",X,[a("div",Y,[Z,a("div",ee," - "+d(E(Q).params.theme),1)]),e(J,{class:"PTTSearchBar",onSearchTheme:x}),a("div",te,[e(D,{"thumb-style":o.thumbStyle,"bar-style":o.barStyle,style:{height:"100%",width:"100%"}},{default:t(()=>[(i(!0),T(q,null,I(n.value,(r,m)=>(i(),h(S,{class:"q-mr-md",key:m,clickable:"",onClick:fe=>F(m),style:{"border-bottom":"1px solid #333"}},{default:t(()=>[e(p,{style:{width:"20vw"}},{default:t(()=>[e(g,{lines:"1"},{default:t(()=>[y(d(n.value[m].head),1)]),_:2},1024)]),_:2},1024),e(p,{side:"",top:""},{default:t(()=>[e(g,{caption:""},{default:t(()=>[y(d(n.value[m].userName),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1},8,["thumb-style","bar-style"])]),a("div",ae,[a("div",se,[e(D,{class:"q-mt-lg","thumb-style":o.thumbStyle,"bar-style":o.barStyle,style:{height:"300px",width:"100%"}},{default:t(()=>[a("div",le,d(l.value.head),1),a("div",oe,[a("p",re,d(l.value.content),1)]),l.value.imgURL?(i(),h(_,{key:0,style:{width:"300px"},onClick:s[0]||(s[0]=r=>k.value=!0)},{default:t(()=>[a("img",{style:{width:"300px"},src:l.value.imgURL,alt:""},null,8,ie)]),_:1})):w("",!0),e(B,{modelValue:k.value,"onUpdate:modelValue":s[1]||(s[1]=r=>k.value=r)},{default:t(()=>[a("img",{style:{width:"50vw"},src:l.value.imgURL,alt:""},null,8,de)]),_:1},8,["modelValue"]),a("div",ne,[l.value.head!=="\u9EDE\u9078\u65C1\u908A\u7684\u6B04\u4F4D"?(i(),h(P,{key:0,rounded:"",size:"md"},{default:t(()=>[a("img",{src:l.value.userAvatar},null,8,ue)]),_:1})):w("",!0),a("div",ce,d(l.value.userName),1)])]),_:1},8,["thumb-style","bar-style"])]),e(D,{"thumb-style":o.thumbStyle,"bar-style":o.barStyle,style:{height:"40%",width:"100%"}},{default:t(()=>[(i(!0),T(q,null,I(l.value.messageBoard,(r,m)=>(i(),h(S,{key:m},{default:t(()=>[e(p,{top:"",avatar:""},{default:t(()=>[e(P,{rounded:""},{default:t(()=>[a("img",{src:r.avatar},null,8,me)]),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(g,null,{default:t(()=>[y(d(r.message),1)]),_:2},1024)]),_:2},1024),e(p,{side:"",top:""},{default:t(()=>[e(g,{caption:""},{default:t(()=>[y(d(r.userName),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),l.value.head!=="\u9EDE\u9078\u65C1\u908A\u7684\u6B04\u4F4D"?(i(),h(S,{key:0},{default:t(()=>[e(p,{top:"",class:"text-center"},{default:t(()=>[e(_,{color:"teal-4",icon:"fa-regular fa-comment",label:"\u7559\u8A00",onClick:s[2]||(s[2]=r=>c.value=!0)})]),_:1})]),_:1})):w("",!0)]),_:1},8,["thumb-style","bar-style"])])])]),e(B,{modelValue:c.value,"onUpdate:modelValue":s[4]||(s[4]=r=>c.value=r),persistent:""},{default:t(()=>[a("div",ve,[a("div",pe,[e(H,{modelValue:u.value,"onUpdate:modelValue":s[3]||(s[3]=r=>u.value=r),definitions:{bold:{label:"Bold",icon:null,tip:"My bold tooltip"}}},null,8,["modelValue"]),a("div",_e,[e(_,{color:"pink-4",icon:"fa-solid fa-xmark",onClick:A,class:"q-mr-md"}),e(_,{color:"teal-4",icon:"fa-solid fa-check",onClick:U})])])])]),_:1},8,["modelValue"])],64))}};var Ie=L(he,[["__scopeId","data-v-361b3489"]]);export{Ie as default};
