import{aj as L,r as h,_ as j,o as s,j as f,e as o,w as e,g as k,h as u,i as l,F as x,ak as T,k as $,d,f as _,t as r,n as C,l as S,p as D}from"./index.3bc77ca5.js";import{Q as v}from"./QCardSection.e9bb6a8d.js";import{Q as I}from"./QScrollArea.f2b448be.js";import{Q as N}from"./QCard.7f8dc242.js";import{Q as q}from"./QDialog.6e19ce62.js";import{C as P}from"./ClosePopup.44cab12a.js";import{P as F,S as U,a as E}from"./pagination.54c1f46f.js";import{u as J}from"./use-quasar.f8aae275.js";import"./use-dark.a295ce0c.js";import"./QScrollObserver.bad7f234.js";import"./format.079d6594.js";import"./focus-manager.05708ea9.js";const R={key:0,class:"swiperContainer"},b={class:"row"},z={class:"activityTitlePosition text-h5 text-left"},G={class:"activityTimePosition text-weight-regular"},H={class:"activityTitlePosition text-h5 text-left"},K={class:"activityTimePosition text-weight-regular"},M=["src"],O={class:"text-h6"},W={__name:"ActivityPage",setup(X){const m=J(),p=h(!1),t=h([{head:"",date:""}]),i=h(0),y=async()=>{try{const{data:a}=await T.get("/activity/all",{params:{theme:""}});console.log(a),t.value=a.result}catch{}};y();const g=a=>{i.value=a,p.value=!0},A=async()=>{try{await D.post(`/activity/${t.value[i.value]._id}`),y(),m.notify({message:"success",caption:"\u53C3\u8207\u6D3B\u52D5\u6210\u529F",color:"secondary"})}catch{console.log(t.value[i.value]._id),m.notify({message:"error",caption:"\u53C3\u8207\u6D3B\u52D5\u5931\u6557",color:"red"})}},Q=async()=>{try{await D.patch(`/activity/${t.value[i.value]._id}`),y(),m.notify({message:"success",caption:"\u53D6\u6D88\u6D3B\u52D5\u6210\u529F",color:"secondary"})}catch{m.notify({message:"error",caption:"\u53D6\u6D88\u6D3B\u52D5\u5931\u6557",color:"red"})}},B=j([F]);return(a,w)=>(s(),f(x,null,[(a.display=!0)?(s(),f("div",R,[o(k(E),{slidesPerView:4,spaceBetween:30,direction:"vertical",loop:"true",modules:B,class:"mySwiper"},{default:e(()=>[(s(!0),f(x,null,$(t.value,(c,n)=>(s(),d(k(U),{key:n},{default:e(()=>[l("div",b,[n%2===0?(s(),d(_,{key:0,class:"activityBoxLeft",onClick:V=>g(n)},{default:e(()=>[l("div",z,r(c.head),1),l("div",G,r(new Date(c.date).toLocaleDateString()),1)]),_:2},1032,["onClick"])):u("",!0),n%2===1?(s(),d(_,{key:1,class:"activityBox",onClick:V=>g(n)},{default:e(()=>[l("div",H,r(c.head),1),l("div",K,r(new Date(c.date).toLocaleDateString()),1)]),_:2},1032,["onClick"])):u("",!0)])]),_:2},1024))),128))]),_:1},8,["modules"])])):u("",!0),l("div",null,[o(q,{modelValue:p.value,"onUpdate:modelValue":w[0]||(w[0]=c=>p.value=c),"full-width":""},{default:e(()=>[o(N,{class:"column",style:{width:"30vw !important",height:"80%"}},{default:e(()=>[o(I,{style:{width:"100%",height:"100%"}},{default:e(()=>[o(v,null,{default:e(()=>[l("img",{src:t.value[i.value].imgURL,style:{display:"block","max-height":"70vh",margin:"auto","max-width":"100%"}},null,8,M)]),_:1}),o(v,null,{default:e(()=>[l("div",O,r(t.value[i.value].head),1)]),_:1}),o(v,{class:"col q-pt-none"},{default:e(()=>[C(r(t.value[i.value].content),1)]),_:1}),o(v,{class:"col q-pt-none text-right"},{default:e(()=>[C(" \u6D3B\u52D5\u6642\u9593 : "+r(new Date(t.value[i.value].date).toLocaleString()),1)]),_:1}),o(v,{class:"text-right"},{default:e(()=>[t.value[i.value].join.includes(a.user.userId.toString())?S((s(),d(_,{key:0,label:"\u53D6\u6D88\u53C3\u8207",onClick:Q},null,512)),[[P]]):u("",!0),t.value[i.value].join.includes(a.user.userId.toString())?u("",!0):S((s(),d(_,{key:1,label:"\u53C3\u52A0\u6D3B\u52D5",onClick:A},null,512)),[[P]])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var ue=L(W,[["__scopeId","data-v-27ef9686"]]);export{ue as default};
