import{al as S,u as I,_ as j,E as q,o,j as l,i as e,F as v,k as B,am as D,t as d,g as u,l as y,d as m,f as h,h as g,ao as b,ap as $,p as x}from"./index.0f80e695.js";import{C as f}from"./ClosePopup.f24f844e.js";import{u as P}from"./use-quasar.57d1af21.js";import"./portal.ab367d15.js";const k=c=>(b("data-v-8a754e7e"),c=c(),$(),c),E=k(()=>e("div",{class:"q-mb-md q-mt-xl text-center text-h2 text-weight-medium text-uppercase"},"activities",-1)),L=k(()=>e("div",{class:"text-center text-h4"},"Embark on a spiritual journey",-1)),F={class:"container"},N=["src"],Q={class:"activityContent"},U={class:"q-ma-xl text-h3"},V={class:"text-h6 q-ma-xl",style:{"white-space":"pre"}},J={class:"text-h6 q-ma-xl",style:{"white-space":"pre"}},M={class:"btn"},R={__name:"ActivityPage",setup(c){const i=P(),_=I(),a=j([{head:"",date:"",join:"\u53C3\u52A0\u6D3B\u52D5"}]),n=async()=>{try{const{data:t}=await D.get("/activity/all");a.splice(0,a.length,...t.result),console.log(t.result)}catch(t){console.log(t)}},w=async t=>{try{await x.post(`/activity/${a[t]._id}`),n(),i.notify({message:"success",caption:"\u53C3\u8207\u6D3B\u52D5\u6210\u529F",color:"secondary"})}catch{console.log(),i.notify({message:"error",caption:"\u53C3\u8207\u6D3B\u52D5\u5931\u6557",color:"red"})}},A=async t=>{try{await x.patch(`/activity/${a[t]._id}`),n(),i.notify({message:"success",caption:"\u53D6\u6D88\u6D3B\u52D5\u6210\u529F",color:"secondary"})}catch{i.notify({message:"error",caption:"\u53D6\u6D88\u6D3B\u52D5\u5931\u6557",color:"red"})}};return q(()=>{n()}),(t,p)=>(o(),l(v,null,[E,L,e("div",F,[(o(!0),l(v,null,B(a,(s,r)=>(o(),l("div",{class:"activityBox",key:r},[e("img",{class:"activityImg",src:s.imgURL},null,8,N),e("div",Q,[e("div",U,d(s.head),1),e("div",V,d(s.content),1),e("div",J,d(new Date(s.date).toLocaleDateString()),1)]),e("div",M,[s.join.includes(u(_).userId.toString())?y((o(),m(h,{key:0,label:"\u53D6\u6D88\u53C3\u8207",onClick:C=>A(r)},null,8,["onClick"])),[[f]]):g("",!0),s.join.includes(u(_).userId.toString())?g("",!0):y((o(),m(h,{key:1,label:"\u53C3\u52A0\u6D3B\u52D5",onClick:C=>w(r)},null,8,["onClick"])),[[f]])])]))),128))])],64))}};var O=S(R,[["__scopeId","data-v-8a754e7e"]]);export{O as default};
