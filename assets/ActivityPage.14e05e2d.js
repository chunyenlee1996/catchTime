import{al as I,u as S,_ as b,r as D,E as j,o,j as l,i as t,F as v,k as q,am as B,t as d,g as p,l as u,d as y,f as m,h,aD as C,aE as E,p as g}from"./index.c9889f0b.js";import{C as x}from"./ClosePopup.6daee4d5.js";import{u as P}from"./use-quasar.8c802a0e.js";import"./portal.c1f3a29e.js";const f=c=>(C("data-v-c3b111ae"),c=c(),E(),c),L=f(()=>t("div",{class:"q-mb-md q-mt-xl text-center text-h2 text-weight-medium text-uppercase"},"activities",-1)),$=f(()=>t("div",{class:"text-center text-h4"},"Embark on a spiritual journey",-1)),F={class:"container"},N=["src"],Q={class:"activityContent"},U={class:"q-ma-xl text-h3"},V={class:"text-h6 q-ma-xl",style:{"white-space":"pre"}},J={class:"text-h6 q-ma-xl",style:{"white-space":"pre"}},M={class:"btn"},R={__name:"ActivityPage",setup(c){const i=P(),_=S(),e=b([{head:"",date:"",join:"\u53C3\u52A0\u6D3B\u52D5"}]),n=D(0),r=async()=>{try{const{data:a}=await B.get("/activity/all");e.splice(0,e.length,...a.result),console.log(e)}catch(a){console.log(a)}},k=async()=>{try{await g.post(`/activity/${e.value[n.value]._id}`),r(),i.notify({message:"success",caption:"\u53C3\u8207\u6D3B\u52D5\u6210\u529F",color:"secondary"})}catch{console.log(e.value[n.value]._id),i.notify({message:"error",caption:"\u53C3\u8207\u6D3B\u52D5\u5931\u6557",color:"red"})}},w=async()=>{try{await g.patch(`/activity/${e.value[n.value]._id}`),r(),i.notify({message:"success",caption:"\u53D6\u6D88\u6D3B\u52D5\u6210\u529F",color:"secondary"})}catch{i.notify({message:"error",caption:"\u53D6\u6D88\u6D3B\u52D5\u5931\u6557",color:"red"})}};return j(()=>{r()}),(a,z)=>(o(),l(v,null,[L,$,t("div",F,[(o(!0),l(v,null,q(e,(s,A)=>(o(),l("div",{class:"activityBox",key:A},[t("img",{class:"activityImg",src:s.imgURL},null,8,N),t("div",Q,[t("div",U,d(s.head),1),t("div",V,d(s.content),1),t("div",J,d(new Date(s.date).toLocaleDateString()),1)]),t("div",M,[s.join.includes(p(_).userId.toString())?u((o(),y(m,{key:0,label:"\u53D6\u6D88\u53C3\u8207",onClick:w},null,512)),[[x]]):h("",!0),s.join.includes(p(_).userId.toString())?h("",!0):u((o(),y(m,{key:1,label:"\u53C3\u52A0\u6D3B\u52D5",onClick:k},null,512)),[[x]])])]))),128))])],64))}};var T=I(R,[["__scopeId","data-v-c3b111ae"]]);export{T as default};
