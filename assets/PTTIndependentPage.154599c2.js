import{al as F,aF as $,u as U,r as v,o as n,j as x,i as a,e,f,t as i,g as L,w as t,F as T,am as R,k as C,d as h,n as y,Q as I,h as w,ao as z,ap as E,p as O}from"./index.0f80e695.js";import{Q as j,b as g}from"./QDialog.8ddf2cf9.js";import{a as p,Q as q}from"./format.826bc018.js";import{Q as S}from"./QScrollArea.5f374b6e.js";import{Q as G}from"./QEditor.ece12579.js";import{u as H}from"./use-quasar.57d1af21.js";import{_ as M}from"./SearchBar.9a32c618.js";import"./use-dark.a03b507b.js";import"./portal.ab367d15.js";import"./QForm.512ca602.js";import"./QScrollObserver.8f701a27.js";import"./use-fullscreen.530df175.js";const B=_=>(z("data-v-404627d7"),_=_(),E(),_),J=B(()=>a("div",{class:"topic-bg"},null,-1)),K={class:"absolute-top contentContainer"},W={class:"PTTContainerLeft absolute-center q-mt-md"},X={class:"absolute-top-left q-ma-xl"},Y=B(()=>a("div",{class:"text-h5 text-weight-medium",style:{"font-size":"30px"}},"Discovery",-1)),Z={class:"q-mt-xs text-caption"},ee={class:"listHeaderGroup"},te={class:"questionDisplay"},ae={class:"questionDisplayTop"},se={class:"text-h4 text-center"},oe={class:"text-subtitle1 q-pa-md"},le={class:"text-right q-mr-lg"},re=["src"],ie={class:"q-ml-xs text-h6",style:{display:"inline-block",position:"relative",top:"6px",left:"6px"}},de=["src"],ne={class:"editorDialogContainer"},ue={class:"q-pa-md q-gutter-sm"},ce={class:"text-center q-mt-xs"},me={__name:"PTTIndependentPage",setup(_){const Q=$(),b=H(),D=U(),u=v([]),l=v({head:"\u9EDE\u9078\u65C1\u908A\u7684\u6B04\u4F4D",userAvatar:"https://source.boringavatars.com/beam/250/65sdfsdf65asg64w4t?colors=264653,2a9d8f,e9c46a,f4a261,e76f51",messageBoard:[]}),P=v(),d=v(""),c=v(!1),V=()=>{d.value="",c.value=!1},N=async()=>{try{await O.post(`PTTs/${P.value}`,{message:d.value}),l.value.messageBoard.push({avatar:D.avatar,message:d.value,userName:D.userName}),d.value="",c.value=!1,k(),b.notify({message:"success",caption:"\u65B0\u589E\u7559\u8A00\u6210\u529F",color:"secondary"})}catch{d.value="",c.value=!1,b.notify({message:"error",caption:"\u8ACB\u767B\u5165\u5E33\u865F",color:"red"})}},A=s=>{l.value=u.value[s],P.value=u.value[s]._id},k=async s=>{try{const{data:o}=await R.get("/PTTs/all",{params:{theme:Q.params.theme,search:s}});u.value=o.result}catch(o){console.log(o),b.notify({message:"error",caption:"\u8B80\u53D6\u5931\u6557",color:"red"})}};return k(),(s,o)=>(n(),x(T,null,[J,a("div",K,[e(f,{class:"q-mb-md q-mr-md fixed-bottom-right",color:"teal-2",icon:"fa-solid fa-angles-left",label:"back",to:"/PTTPage"}),a("div",W,[a("div",X,[Y,a("div",Z," - "+i(L(Q).params.theme),1)]),e(M,{class:"PTTSearchBar",onSearchTheme:k}),a("div",ee,[e(S,{"thumb-style":s.thumbStyle,"bar-style":s.barStyle,style:{height:"100%",width:"100%"}},{default:t(()=>[(n(!0),x(T,null,C(u.value,(r,m)=>(n(),h(q,{class:"q-mr-md",key:m,clickable:"",onClick:pe=>A(m),style:{"border-bottom":"1px solid #333"}},{default:t(()=>[e(p,null,{default:t(()=>[e(g,null,{default:t(()=>[y(i(u.value[m].head),1)]),_:2},1024)]),_:2},1024),e(p,{side:"",top:""},{default:t(()=>[e(g,{caption:""},{default:t(()=>[y(i(u.value[m].userName),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1},8,["thumb-style","bar-style"])]),a("div",te,[a("div",ae,[e(S,{class:"q-mt-lg","thumb-style":s.thumbStyle,"bar-style":s.barStyle,style:{height:"300px",width:"100%"}},{default:t(()=>[a("div",se,i(l.value.head),1),a("div",oe,[a("p",null,i(l.value.content),1)]),a("div",le,[l.value.head!=="\u9EDE\u9078\u65C1\u908A\u7684\u6B04\u4F4D"?(n(),h(I,{key:0,rounded:"",size:"md"},{default:t(()=>[a("img",{src:l.value.userAvatar},null,8,re)]),_:1})):w("",!0),a("div",ie,i(l.value.userName),1)])]),_:1},8,["thumb-style","bar-style"])]),e(S,{"thumb-style":s.thumbStyle,"bar-style":s.barStyle,style:{height:"40%",width:"100%"}},{default:t(()=>[(n(!0),x(T,null,C(l.value.messageBoard,(r,m)=>(n(),h(q,{key:m},{default:t(()=>[e(p,{top:"",avatar:""},{default:t(()=>[e(I,{rounded:""},{default:t(()=>[a("img",{src:r.avatar},null,8,de)]),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(g,null,{default:t(()=>[y(i(r.message),1)]),_:2},1024)]),_:2},1024),e(p,{side:"",top:""},{default:t(()=>[e(g,{caption:""},{default:t(()=>[y(i(r.userName),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),l.value.head!=="\u9EDE\u9078\u65C1\u908A\u7684\u6B04\u4F4D"?(n(),h(q,{key:0},{default:t(()=>[e(p,{top:"",class:"text-center"},{default:t(()=>[e(f,{color:"teal-4",icon:"fa-regular fa-comment",label:"\u7559\u8A00",onClick:o[0]||(o[0]=r=>c.value=!0)})]),_:1})]),_:1})):w("",!0)]),_:1},8,["thumb-style","bar-style"])])])]),e(j,{modelValue:c.value,"onUpdate:modelValue":o[2]||(o[2]=r=>c.value=r),persistent:""},{default:t(()=>[a("div",ne,[a("div",ue,[e(G,{modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=r=>d.value=r),definitions:{bold:{label:"Bold",icon:null,tip:"My bold tooltip"}}},null,8,["modelValue"]),a("div",ce,[e(f,{color:"pink-4",icon:"fa-solid fa-xmark",onClick:V,class:"q-mr-md"}),e(f,{color:"teal-4",icon:"fa-solid fa-check",onClick:N})])])])]),_:1},8,["modelValue"])],64))}};var Qe=F(me,[["__scopeId","data-v-404627d7"]]);export{Qe as default};
