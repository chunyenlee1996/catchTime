import{Q as S}from"./QScrollArea.ba4733fe.js";import{al as b,u as q,_ as D,o as I,d as o,k as d,j as t,F as m,l as j,an as B,f as $,w as L,t as n,h,m as v,e as y,g as u,i as g,aD as P,aE as Q,q as x}from"./index.026be9e3.js";import{C as k}from"./ClosePopup.6e100096.js";import{u as E}from"./use-quasar.940463da.js";import"./use-dark.d85d4452.js";import"./QScrollObserver.39de0c80.js";import"./format.dae1b3d5.js";import"./portal.4cb70496.js";const f=c=>(P("data-v-69383242"),c=c(),Q(),c),N=f(()=>t("div",{class:"q-mb-md q-mt-xl text-center text-h2 text-weight-medium text-uppercase"},"activities",-1)),U=f(()=>t("div",{class:"text-center text-h4"},"Embark on a spiritual journey",-1)),V={class:"container"},F=["src"],R={class:"activityContent"},J={class:"q-ma-xl text-h3"},M={class:"text-h6 q-ma-xl",style:{"white-space":"break-spaces"}},z={class:"text-h6 q-ma-xl",style:{"white-space":"break-spaces"}},G={class:"text-h6 q-ma-xl",style:{"white-space":"break-spaces"}},H={class:"btn"},K={__name:"ActivityPage",setup(c){const i=E(),_=q(),a=D([{head:"",date:"",join:"\u53C3\u52A0\u6D3B\u52D5"}]),r=async()=>{try{const{data:e}=await B.get("/activity/all");a.splice(0,a.length,...e.result),console.log(e.result)}catch(e){console.log(e)}},w=async e=>{try{await x.post(`/activity/${a[e]._id}`),r(),i.notify({message:"success",caption:"\u53C3\u8207\u6D3B\u52D5\u6210\u529F",color:"secondary"})}catch{console.log(),i.notify({message:"error",caption:"\u53C3\u8207\u6D3B\u52D5\u5931\u6557",color:"red"})}},A=async e=>{try{await x.patch(`/activity/${a[e]._id}`),r(),i.notify({message:"success",caption:"\u53D6\u6D88\u6D3B\u52D5\u6210\u529F",color:"secondary"})}catch{i.notify({message:"error",caption:"\u53D6\u6D88\u6D3B\u52D5\u5931\u6557",color:"red"})}};return I(()=>{r()}),(e,p)=>(o(),d(m,null,[N,U,t("div",V,[(o(!0),d(m,null,j(a,(s,l)=>(o(),d("div",{class:"activityBox",key:l},[t("img",{class:"activityImg",src:s.imgURL},null,8,F),t("div",R,[$(S,{style:{width:"100%",height:"100%"}},{default:L(()=>[t("div",J,n(s.head),1),t("div",M,n(s.content),1),t("div",z,n(s.mainURL),1),t("div",G,"\u6D3B\u52D5\u65E5\u671F \uFF1A "+n(new Date(s.date).toLocaleDateString()),1)]),_:2},1024)]),t("div",H,[s.join.includes(h(_).userId.toString())?v((o(),y(u,{key:0,label:"\u53D6\u6D88\u53C3\u8207",onClick:C=>A(l)},null,8,["onClick"])),[[k]]):g("",!0),s.join.includes(h(_).userId.toString())?g("",!0):v((o(),y(u,{key:1,label:"\u53C3\u52A0\u6D3B\u52D5",onClick:C=>w(l)},null,8,["onClick"])),[[k]])])]))),128))])],64))}};var st=b(K,[["__scopeId","data-v-69383242"]]);export{st as default};
