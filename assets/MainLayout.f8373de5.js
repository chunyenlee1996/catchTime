import{Q as L}from"./QImg.20d231d0.js";import{r as I,u as R,a as V,s as h,o as S,c as A,b as B,d as t,e as l,w as a,f as e,Q as p,g as D,h as r,i,j as k,k as z,l as F,m as b,v as U,n as w,p as P,t as q,F as H,q as M,R as j}from"./index.db764cee.js";import{Q as E,a as O,b as G,c as v,d as o,e as J,f as K}from"./QLayout.2f93245e.js";import{Q,a as d}from"./use-prevent-scroll.7f7d7311.js";import{Q as W}from"./QPageContainer.491d7462.js";import{_ as X}from"./white_catchTime.6bee3d75.js";import"./use-dark.7d48d3c9.js";import"./QScrollObserver.88dd0327.js";import"./format.5c5cc304.js";import"./rtl.b51694b1.js";const Y=k("span",{style:{"font-size":"medium"}}," CatchTime ",-1),Z=["src"],ce={__name:"MainLayout",setup($){const u=I(!1),n=R(),m=V(),{isLogin:c}=h(n),{isAdmin:f}=h(n);S(()=>{m.push("/IndexPage")});const y=()=>{u.value=!u.value},x=A(()=>[{iconName:"fa-solid fa-house",label:"\u9996\u9801",to:"/IndexPage",show:!0},{iconName:"fa-regular fa-image",label:"\u767C\u73FE",to:"/ImagePage",show:!0},{iconName:"fa-regular fa-comment",label:"\u8A0E\u8AD6",to:"/PTTPage",show:!0},{iconName:"fa-regular fa-calendar-check",label:"\u6D3B\u52D5",to:"/ActivityPage",show:!0},{iconName:"fa-solid fa-arrow-right-to-bracket",label:"\u767B\u5165/\u8A3B\u518A",to:"/LoginPage",show:!n.isLogin},{iconName:"fa-solid fa-gear",label:"\u7BA1\u7406",to:"/setting/PhotoSettingPage",show:f}]),g=async()=>{try{await M.delete("/users/logout"),n.logout(),m.push("/IndexPage")}catch{}};return(T,_)=>{const N=B("router-view");return t(),l(E,{view:"hHh lpR fFf"},{default:a(()=>[e(J,{elevated:"",class:"bg-blue-grey-6 text-white","height-hint":"98"},{default:a(()=>[e(O,null,{default:a(()=>[e(G,{size:"md"},{default:a(()=>[e(p,{size:"xl"},{default:a(()=>[e(L,{src:X,class:"q-mr-xs"})]),_:1}),Y]),_:1}),e(D,{dense:"",flat:"",round:"",icon:"menu",onClick:y,class:"lt-sm"}),e(v,{align:"left",class:"gt-xs"},{default:a(()=>[e(o,{to:"/IndexPage",label:"\u9996\u9801"}),e(o,{to:"/ImagePage",label:"\u767C\u73FE"}),e(o,{to:"/PTTPage",label:"\u8A0E\u8AD6"}),e(o,{to:"/ActivityPage",label:"\u6D3B\u52D5"}),r(c)?i("",!0):(t(),l(o,{key:0,to:"/LoginPage",label:"\u767B\u5165/\u8A3B\u518A"})),r(f)?(t(),l(o,{key:1,to:"/setting/PhotoSettingPage",label:"\u7BA1\u7406"})):i("",!0),r(c)?(t(),l(o,{key:2,label:"\u767B\u51FA",onClick:g})):i("",!0)]),_:1}),e(v,{align:"left"},{default:a(()=>[r(c)?(t(),l(o,{key:0,to:"/UserPage"},{default:a(()=>[e(p,null,{default:a(()=>[k("img",{src:r(n).avatar},null,8,Z)]),_:1})]),_:1})):i("",!0)]),_:1})]),_:1})]),_:1}),e(K,{modelValue:u.value,"onUpdate:modelValue":_[0]||(_[0]=s=>u.value=s),side:"right",bordered:"",dark:"true"},{default:a(()=>[(t(!0),z(H,null,F(x.value,(s,C)=>b((t(),l(Q,{key:C,to:s.to},{default:a(()=>[e(d,{avatar:""},{default:a(()=>[e(w,{name:s.iconName},null,8,["name"])]),_:2},1024),e(d,null,{default:a(()=>[P(q(s.label),1)]),_:2},1024)]),_:2},1032,["to"])),[[U,s.show]])),128)),r(c)?b((t(),l(Q,{key:0,onClick:g,clickable:""},{default:a(()=>[e(d,{avatar:""},{default:a(()=>[e(w,{name:"fa-solid fa-arrow-right-from-bracket"})]),_:1}),e(d,null,{default:a(()=>[P("\u767B\u51FA")]),_:1})]),_:1})),[[j]]):i("",!0)]),_:1},8,["modelValue"]),e(W,null,{default:a(()=>[e(N)]),_:1})]),_:1})}}};export{ce as default};
