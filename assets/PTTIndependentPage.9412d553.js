import{al as F,aF as $,u as U,r as v,d as n,k as x,j as a,f as e,g as h,t as i,h as E,w as t,F as T,an as L,l as P,e as f,p as y,Q as C,i as I,aD as R,aE as z,q as O}from"./index.026be9e3.js";import{Q as j,b}from"./QDialog.a4ca6f54.js";import{a as p,Q as q}from"./use-prevent-scroll.bb5724f4.js";import{Q as S}from"./QScrollArea.ba4733fe.js";import{Q as G}from"./QEditor.462c5647.js";import{u as H}from"./use-quasar.940463da.js";import{_ as M}from"./SearchBar.5444e087.js";import"./format.dae1b3d5.js";import"./use-dark.d85d4452.js";import"./portal.4cb70496.js";import"./QForm.33008aec.js";import"./uid.42677368.js";import"./QScrollObserver.39de0c80.js";import"./use-fullscreen.d78ca9ba.js";const B=_=>(R("data-v-ba1834a8"),_=_(),z(),_),J=B(()=>a("div",{class:"topic-bg"},null,-1)),K={class:"absolute-top contentContainer"},W={class:"PTTContainerLeft absolute-center q-mt-md"},X={class:"absolute-top-left q-ma-xl"},Y=B(()=>a("div",{class:"text-h5 text-weight-medium",style:{"font-size":"30px"}},"Discovery",-1)),Z={class:"q-mt-xs text-caption"},ee={class:"listHeaderGroup"},te={class:"questionDisplay"},ae={class:"questionDisplayTop"},se={class:"text-h4 text-center"},oe={class:"text-subtitle1 q-pa-md"},le={style:{"white-space":"break-spaces"}},re={class:"text-right q-mr-lg"},ie=["src"],de={class:"q-ml-xs text-h6",style:{display:"inline-block",position:"relative",top:"6px",left:"6px"}},ne=["src"],ce={class:"editorDialogContainer"},ue={class:"q-pa-md q-gutter-sm"},me={class:"text-center q-mt-xs"},pe={__name:"PTTIndependentPage",setup(_){const D=$(),g=H(),Q=U(),c=v([]),l=v({head:"\u9EDE\u9078\u65C1\u908A\u7684\u6B04\u4F4D",userAvatar:"https://source.boringavatars.com/beam/250/65sdfsdf65asg64w4t?colors=264653,2a9d8f,e9c46a,f4a261,e76f51",messageBoard:[]}),w=v(),d=v(""),u=v(!1),V=()=>{d.value="",u.value=!1},N=async()=>{try{await O.post(`PTTs/${w.value}`,{message:d.value}),l.value.messageBoard.push({avatar:Q.avatar,message:d.value,userName:Q.userName}),d.value="",u.value=!1,k(),g.notify({message:"success",caption:"\u65B0\u589E\u7559\u8A00\u6210\u529F",color:"secondary"})}catch{d.value="",u.value=!1,g.notify({message:"error",caption:"\u8ACB\u767B\u5165\u5E33\u865F",color:"red"})}},A=s=>{l.value=c.value[s],w.value=c.value[s]._id},k=async s=>{try{const{data:o}=await L.get("/PTTs/all",{params:{theme:D.params.theme,search:s}});c.value=o.result}catch(o){console.log(o),g.notify({message:"error",caption:"\u8B80\u53D6\u5931\u6557",color:"red"})}};return k(),(s,o)=>(n(),x(T,null,[J,a("div",K,[e(h,{class:"q-mb-md q-mr-md fixed-bottom-right",color:"teal-2",icon:"fa-solid fa-angles-left",label:"back",to:"/PTTPage"}),a("div",W,[a("div",X,[Y,a("div",Z," - "+i(E(D).params.theme),1)]),e(M,{class:"PTTSearchBar",onSearchTheme:k}),a("div",ee,[e(S,{"thumb-style":s.thumbStyle,"bar-style":s.barStyle,style:{height:"100%",width:"100%"}},{default:t(()=>[(n(!0),x(T,null,P(c.value,(r,m)=>(n(),f(q,{class:"q-mr-md",key:m,clickable:"",onClick:ve=>A(m),style:{"border-bottom":"1px solid #333"}},{default:t(()=>[e(p,{style:{width:"20vw"}},{default:t(()=>[e(b,{lines:"1"},{default:t(()=>[y(i(c.value[m].head),1)]),_:2},1024)]),_:2},1024),e(p,{side:"",top:""},{default:t(()=>[e(b,{caption:""},{default:t(()=>[y(i(c.value[m].userName),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1},8,["thumb-style","bar-style"])]),a("div",te,[a("div",ae,[e(S,{class:"q-mt-lg","thumb-style":s.thumbStyle,"bar-style":s.barStyle,style:{height:"300px",width:"100%"}},{default:t(()=>[a("div",se,i(l.value.head),1),a("div",oe,[a("p",le,i(l.value.content),1)]),a("div",re,[l.value.head!=="\u9EDE\u9078\u65C1\u908A\u7684\u6B04\u4F4D"?(n(),f(C,{key:0,rounded:"",size:"md"},{default:t(()=>[a("img",{src:l.value.userAvatar},null,8,ie)]),_:1})):I("",!0),a("div",de,i(l.value.userName),1)])]),_:1},8,["thumb-style","bar-style"])]),e(S,{"thumb-style":s.thumbStyle,"bar-style":s.barStyle,style:{height:"40%",width:"100%"}},{default:t(()=>[(n(!0),x(T,null,P(l.value.messageBoard,(r,m)=>(n(),f(q,{key:m},{default:t(()=>[e(p,{top:"",avatar:""},{default:t(()=>[e(C,{rounded:""},{default:t(()=>[a("img",{src:r.avatar},null,8,ne)]),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(b,null,{default:t(()=>[y(i(r.message),1)]),_:2},1024)]),_:2},1024),e(p,{side:"",top:""},{default:t(()=>[e(b,{caption:""},{default:t(()=>[y(i(r.userName),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),l.value.head!=="\u9EDE\u9078\u65C1\u908A\u7684\u6B04\u4F4D"?(n(),f(q,{key:0},{default:t(()=>[e(p,{top:"",class:"text-center"},{default:t(()=>[e(h,{color:"teal-4",icon:"fa-regular fa-comment",label:"\u7559\u8A00",onClick:o[0]||(o[0]=r=>u.value=!0)})]),_:1})]),_:1})):I("",!0)]),_:1},8,["thumb-style","bar-style"])])])]),e(j,{modelValue:u.value,"onUpdate:modelValue":o[2]||(o[2]=r=>u.value=r),persistent:""},{default:t(()=>[a("div",ce,[a("div",ue,[e(G,{modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=r=>d.value=r),definitions:{bold:{label:"Bold",icon:null,tip:"My bold tooltip"}}},null,8,["modelValue"]),a("div",me,[e(h,{color:"pink-4",icon:"fa-solid fa-xmark",onClick:V,class:"q-mr-md"}),e(h,{color:"teal-4",icon:"fa-solid fa-check",onClick:N})])])])]),_:1},8,["modelValue"])],64))}};var Pe=F(pe,[["__scopeId","data-v-ba1834a8"]]);export{Pe as default};
